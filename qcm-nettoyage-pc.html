<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-Frame-Options" content="ALLOWALL">
<title>QCM â€” Nettoyage PC Windows</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,400;0,500;1,400&family=Syne:wght@700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg:        #0f1117;
  --bg2:       #161820;
  --surface:   #1c1f2e;
  --surface2:  #22263a;
  --border:    rgba(255,255,255,0.08);
  --border2:   rgba(255,255,255,0.14);
  --accent:    #22c97a;
  --accent2:   #0ea5c9;
  --ok:        #22c97a;
  --err:       #f75a5a;
  --warn:      #f7b84f;
  --text:      #e2e6f3;
  --text2:     #8890aa;
  --text3:     #555e7a;
  --mono:      'DM Mono', monospace;
  --display:   'Syne', sans-serif;
  --body:      'DM Sans', sans-serif;
  --radius:    14px;
  --shadow:    0 4px 32px rgba(0,0,0,0.45);
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior: smooth; }

body {
  font-family: var(--body);
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  line-height: 1.6;
  background-image:
    linear-gradient(rgba(34,201,122,0.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(34,201,122,0.025) 1px, transparent 1px);
  background-size: 40px 40px;
}

.app {
  max-width: 780px;
  margin: 0 auto;
  padding: 32px 20px 80px;
}

/* â”€â”€ HEADER â”€â”€ */
.header { margin-bottom: 36px; animation: fadeUp 0.5s ease both; }

.header-top {
  display: flex; align-items: center;
  gap: 14px; margin-bottom: 10px;
}

.logo-badge {
  width: 48px; height: 48px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.5rem; flex-shrink: 0;
  box-shadow: 0 0 20px rgba(34,201,122,0.3);
}

.header-meta { flex: 1; }

.header-meta h1 {
  font-family: var(--display);
  font-size: clamp(1.2rem, 3.5vw, 1.75rem);
  font-weight: 800; letter-spacing: -0.01em;
  color: #fff; line-height: 1.1;
}

.header-meta .sub {
  font-size: 0.78rem; color: var(--text2);
  margin-top: 2px; font-family: var(--mono);
}

.score-pill {
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: 100px; padding: 6px 16px;
  font-family: var(--mono); font-size: 0.78rem;
  color: var(--text2); white-space: nowrap;
}
.score-pill .val { color: var(--accent); font-weight: 500; }

.progress-wrap { display: flex; align-items: center; gap: 12px; margin-top: 14px; }
.progress-bar-bg {
  flex: 1; height: 4px;
  background: var(--surface2); border-radius: 10px; overflow: hidden;
}
.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  border-radius: 10px;
  transition: width 0.4s cubic-bezier(0.4,0,0.2,1);
  width: 0%;
}
.progress-txt {
  font-family: var(--mono); font-size: 0.72rem;
  color: var(--text3); min-width: 52px; text-align: right;
}

/* â”€â”€ QUESTION CARD â”€â”€ */
.question-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 28px 28px 24px;
  margin-bottom: 14px;
  box-shadow: var(--shadow);
  animation: fadeUp 0.35s ease both;
  position: relative; overflow: hidden;
}
.question-card::before {
  content: ''; position: absolute;
  top: 0; left: 0; right: 0; height: 2px;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  opacity: 0; transition: opacity 0.3s;
}
.question-card.active::before { opacity: 1; }

.q-cat {
  font-family: var(--mono); font-size: 0.62rem;
  color: var(--text3); margin-bottom: 16px;
  text-transform: uppercase; letter-spacing: 0.12em;
  display: flex; align-items: center; gap: 6px;
}
.q-cat::before {
  content: ''; display: inline-block;
  width: 4px; height: 4px; border-radius: 50%;
  background: var(--accent);
}

.q-header { display: flex; align-items: flex-start; gap: 14px; margin-bottom: 20px; }

.q-num {
  font-family: var(--mono); font-size: 0.68rem; font-weight: 500;
  color: var(--accent);
  background: rgba(34,201,122,0.12);
  border: 1px solid rgba(34,201,122,0.28);
  border-radius: 6px; padding: 3px 8px;
  white-space: nowrap; margin-top: 2px; flex-shrink: 0;
}

.q-text { font-size: 1rem; font-weight: 600; color: var(--text); line-height: 1.5; }

/* â”€â”€ OPTIONS â”€â”€ */
.options { display: flex; flex-direction: column; gap: 9px; }

.option {
  display: flex; align-items: center; gap: 12px;
  padding: 12px 16px;
  background: var(--bg2);
  border: 1.5px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.18s ease;
  user-select: none; position: relative; overflow: hidden;
}
.option:hover:not(.disabled) {
  border-color: var(--border2);
  background: var(--surface2);
  transform: translateX(3px);
}
.option.selected  { border-color: var(--accent);  background: rgba(34,201,122,0.08); }
.option.correct   { border-color: var(--ok);      background: rgba(34,201,122,0.10); }
.option.wrong     { border-color: var(--err);     background: rgba(247,90,90,0.10);  }
.option.disabled  { cursor: default; }

.option-letter {
  width: 28px; height: 28px; border-radius: 7px;
  background: var(--surface2); border: 1px solid var(--border2);
  display: flex; align-items: center; justify-content: center;
  font-family: var(--mono); font-size: 0.75rem; font-weight: 500;
  color: var(--text2); flex-shrink: 0; transition: all 0.18s;
}
.option.selected .option-letter { background: var(--accent); border-color: var(--accent); color: #fff; }
.option.correct  .option-letter { background: var(--ok);     border-color: var(--ok);     color: #fff; }
.option.wrong    .option-letter { background: var(--err);    border-color: var(--err);    color: #fff; }

.option-text  { font-size: 0.9rem; color: var(--text); line-height: 1.4; flex: 1; }
.option-icon  { font-size: 1rem; flex-shrink: 0; opacity: 0; transition: opacity 0.2s; }
.option.correct .option-icon,
.option.wrong   .option-icon { opacity: 1; }

/* â”€â”€ EXPLANATION â”€â”€ */
.explanation {
  margin-top: 14px; padding: 12px 16px;
  background: rgba(255,255,255,0.03);
  border-left: 3px solid var(--accent);
  border-radius: 0 8px 8px 0;
  font-size: 0.83rem; color: var(--text2);
  line-height: 1.55; display: none;
  animation: fadeIn 0.3s ease;
}
.explanation.show { display: block; }
.explanation strong { color: var(--text); }

/* â”€â”€ NAVIGATION â”€â”€ */
.nav-row {
  display: flex; gap: 10px; margin-top: 20px;
  justify-content: space-between; align-items: center; flex-wrap: wrap;
}

.btn {
  font-family: var(--body); font-size: 0.85rem; font-weight: 600;
  padding: 10px 22px; border-radius: 9px; border: none;
  cursor: pointer; transition: all 0.18s;
  display: flex; align-items: center; gap: 7px;
}
.btn-primary {
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: #fff; box-shadow: 0 2px 16px rgba(34,201,122,0.3);
}
.btn-primary:hover { transform: translateY(-1px); box-shadow: 0 4px 22px rgba(34,201,122,0.4); }
.btn-primary:disabled { opacity: 0.35; cursor: default; transform: none; box-shadow: none; }
.btn-ghost {
  background: transparent; border: 1.5px solid var(--border2); color: var(--text2);
}
.btn-ghost:hover { border-color: var(--text2); color: var(--text); }
.btn-ghost:disabled { opacity: 0.3; cursor: default; }

/* â”€â”€ RESULTS â”€â”€ */
#results-screen { display: none; animation: fadeUp 0.5s ease; }

.results-hero {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 36px 28px;
  text-align: center; margin-bottom: 20px;
  box-shadow: var(--shadow); position: relative; overflow: hidden;
}
.results-hero::after {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(ellipse at 50% 0%, rgba(34,201,122,0.07) 0%, transparent 70%);
  pointer-events: none;
}

.score-ring { width: 120px; height: 120px; margin: 0 auto 20px; position: relative; }
.score-ring svg { transform: rotate(-90deg); }
.score-ring-text {
  position: absolute; inset: 0;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  font-family: var(--display);
}
.score-ring-text .big { font-size: 1.9rem; font-weight: 800; color: #fff; line-height: 1; }
.score-ring-text .small { font-size: 0.65rem; color: var(--text2); font-family: var(--mono); }

.results-title { font-family: var(--display); font-size: 1.5rem; font-weight: 800; color: #fff; margin-bottom: 6px; }
.results-msg   { font-size: 0.9rem; color: var(--text2); margin-bottom: 24px; }

.stats-row { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-bottom: 24px; }
.stat-box {
  background: var(--bg2); border: 1px solid var(--border);
  border-radius: 10px; padding: 12px 20px; text-align: center; min-width: 90px;
}
.stat-box .sv { font-family: var(--display); font-size: 1.4rem; font-weight: 800; line-height: 1; }
.stat-box .sl { font-size: 0.68rem; color: var(--text2); font-family: var(--mono); margin-top: 3px; text-transform: uppercase; letter-spacing: 0.1em; }
.sv.ok   { color: var(--ok); }
.sv.err  { color: var(--err); }
.sv.warn { color: var(--warn); }

/* â”€â”€ REVIEW â”€â”€ */
.filter-bar { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 14px; }
.filter-btn {
  font-family: var(--mono); font-size: 0.7rem;
  padding: 4px 12px; border-radius: 100px;
  border: 1px solid var(--border2); background: transparent;
  color: var(--text2); cursor: pointer; transition: all 0.15s;
}
.filter-btn.active, .filter-btn:hover {
  background: var(--accent); border-color: var(--accent); color: #fff;
}

.review-item {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 10px; padding: 14px 16px; margin-bottom: 8px;
  display: flex; gap: 12px; align-items: flex-start;
  cursor: pointer; transition: border-color .15s;
}
.review-item:hover { border-color: var(--border2); }
.review-icon { font-size: 1rem; flex-shrink: 0; margin-top: 2px; }
.review-body { flex: 1; }
.review-q  { font-size: 0.85rem; font-weight: 600; color: var(--text); margin-bottom: 4px; line-height: 1.4; }
.review-ans { font-size: 0.78rem; color: var(--text2); font-family: var(--mono); }
.review-ans .correct-ans { color: var(--ok); }
.review-ans .wrong-ans   { color: var(--err); }

/* â”€â”€ INTRO â”€â”€ */
#intro-screen { animation: fadeUp 0.5s ease; }

.intro-card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 40px 32px;
  text-align: center; box-shadow: var(--shadow);
  position: relative; overflow: hidden;
}
.intro-card::before {
  content: ''; position: absolute;
  top: 0; left: 0; right: 0; height: 3px;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
}
.intro-emoji { font-size: 3.5rem; margin-bottom: 16px; display: block; }
.intro-card h2 { font-family: var(--display); font-size: 1.5rem; font-weight: 800; color: #fff; margin-bottom: 10px; }
.intro-card p  { font-size: 0.9rem; color: var(--text2); max-width: 500px; margin: 0 auto 24px; line-height: 1.6; }

.intro-chips { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; margin-bottom: 28px; }
.chip {
  background: var(--bg2); border: 1px solid var(--border2);
  border-radius: 100px; padding: 5px 14px;
  font-size: 0.78rem; color: var(--text2); font-family: var(--mono);
}

/* â”€â”€ ANIMATIONS â”€â”€ */
@keyframes fadeUp  { from { opacity:0; transform:translateY(18px); } to { opacity:1; transform:translateY(0); } }
@keyframes fadeIn  { from { opacity:0; } to { opacity:1; } }
@keyframes pop     { 0%{transform:scale(1)} 50%{transform:scale(1.04)} 100%{transform:scale(1)} }

.pop { animation: pop 0.2s ease; }

@media (max-width: 500px) {
  .app { padding: 20px 14px 60px; }
  .question-card, .intro-card { padding: 20px 16px; }
  .nav-row { flex-direction: column-reverse; }
  .btn { width: 100%; justify-content: center; }
  .header-top { flex-wrap: wrap; }
  .score-pill { display: none; }
}
</style>
</head>
<body>
<div class="app">

  <!-- HEADER -->
  <div class="header" id="main-header" style="display:none">
    <div class="header-top">
      <div class="logo-badge">ğŸ§¹</div>
      <div class="header-meta">
        <h1>QCM â€” Nettoyage PC Windows</h1>
        <div class="sub">Ã‰valuation des connaissances Â· 30 questions</div>
      </div>
      <div class="score-pill">Score : <span class="val" id="live-score">0 / 0</span></div>
    </div>
    <div class="progress-wrap">
      <div class="progress-bar-bg">
        <div class="progress-bar-fill" id="prog-fill"></div>
      </div>
      <div class="progress-txt" id="prog-txt">0 / 30</div>
    </div>
  </div>

  <!-- INTRO -->
  <div id="intro-screen">
    <div class="intro-card">
      <span class="intro-emoji">ğŸ§¹</span>
      <h2>QCM â€” Nettoyage PC Windows</h2>
      <p>Testez vos connaissances sur l'entretien et l'optimisation d'un PC sous Windows : nettoyage des fichiers, registre, dÃ©marrage, sÃ©curitÃ©, disque dur et bonnes pratiques.</p>
      <div class="intro-chips">
        <div class="chip">ğŸ“‹ 30 questions</div>
        <div class="chip">ğŸ· 6 catÃ©gories</div>
        <div class="chip">ğŸ’¡ Explications dÃ©taillÃ©es</div>
        <div class="chip">ğŸ¯ Score en temps rÃ©el</div>
      </div>
      <button class="btn btn-primary" onclick="startQuiz()" style="margin:0 auto">
        Commencer le QCM â†’
      </button>
    </div>
  </div>

  <!-- QUIZ -->
  <div id="quiz-screen" style="display:none">
    <div id="question-container"></div>
  </div>

  <!-- RÃ‰SULTATS -->
  <div id="results-screen">
    <div class="results-hero">
      <div class="score-ring">
        <svg width="120" height="120" viewBox="0 0 120 120">
          <circle cx="60" cy="60" r="52" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="10"/>
          <circle cx="60" cy="60" r="52" fill="none" stroke="url(#rg)" stroke-width="10"
                  stroke-linecap="round" stroke-dasharray="326.7" stroke-dashoffset="326.7" id="ring-arc"/>
          <defs>
            <linearGradient id="rg" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%"   stop-color="#22c97a"/>
              <stop offset="100%" stop-color="#0ea5c9"/>
            </linearGradient>
          </defs>
        </svg>
        <div class="score-ring-text">
          <div class="big"  id="res-pct">â€”</div>
          <div class="small">SCORE</div>
        </div>
      </div>
      <div class="results-title" id="res-title">â€”</div>
      <div class="results-msg"   id="res-msg">â€”</div>
      <div class="stats-row">
        <div class="stat-box"><div class="sv ok"   id="res-ok">â€”</div><div class="sl">Correctes</div></div>
        <div class="stat-box"><div class="sv err"  id="res-err">â€”</div><div class="sl">Incorrectes</div></div>
        <div class="stat-box"><div class="sv warn" id="res-skip">â€”</div><div class="sl">IgnorÃ©es</div></div>
      </div>
      <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
        <button class="btn btn-primary" onclick="restartQuiz()">â†º Recommencer</button>
        <button class="btn btn-ghost"   onclick="showReview()">ğŸ“‹ Voir le corrigÃ©</button>
      </div>
    </div>

    <div id="review-area" style="display:none">
      <div class="filter-bar" id="review-filters">
        <button class="filter-btn active" onclick="filterReview('all',this)">Toutes (30)</button>
        <button class="filter-btn" onclick="filterReview('wrong',this)">âŒ Incorrectes</button>
        <button class="filter-btn" onclick="filterReview('ok',this)">âœ… Correctes</button>
        <button class="filter-btn" onclick="filterReview('skip',this)">â­ IgnorÃ©es</button>
      </div>
      <div id="review-list"></div>
    </div>
  </div>

</div><!-- /app -->

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  30 QUESTIONS â€” NETTOYAGE PC WINDOWS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const QUESTIONS = [

  // â”€â”€ 1. FICHIERS TEMPORAIRES & ESPACE DISQUE (5 questions) â”€â”€
  {
    cat: "Fichiers temporaires & Espace disque",
    q: "Quel outil Windows intÃ©grÃ© permet de supprimer les fichiers temporaires, la corbeille et les fichiers inutiles en quelques clics ?",
    opts: ["DÃ©fragmenteur de disque", "Nettoyage de disque (cleanmgr)", "Gestionnaire de tÃ¢ches", "Ã‰diteur de registre"],
    ans: 1,
    exp: "<strong>Le Nettoyage de disque (cleanmgr.exe)</strong> est l'outil intÃ©grÃ© Ã  Windows pour supprimer les fichiers temporaires, le contenu de la corbeille, les miniatures, les fichiers Internet temporaires, etc. Accessible via DÃ©marrer > Nettoyage de disque ou en tapant <em>cleanmgr</em> dans la barre de recherche."
  },
  {
    cat: "Fichiers temporaires & Espace disque",
    q: "Dans quel dossier Windows stocke-t-il les fichiers temporaires de l'utilisateur ?",
    opts: ["C:\\Windows\\Temp", "C:\\Users\\[Nom]\\AppData\\Local\\Temp", "C:\\ProgramData\\Temp", "C:\\Windows\\System32\\Temp"],
    ans: 1,
    exp: "<strong>C:\\Users\\[Votre nom]\\AppData\\Local\\Temp</strong> (ou %TEMP% dans l'Explorateur) contient les fichiers temporaires de l'utilisateur. Le dossier <em>C:\\Windows\\Temp</em> contient les temporaires systÃ¨me. On peut vider les deux manuellement ou via le Nettoyage de disque."
  },
  {
    cat: "Fichiers temporaires & Espace disque",
    q: "Comment accÃ©der rapidement au dossier des fichiers temporaires depuis la boÃ®te d'exÃ©cution (Win+R) ?",
    opts: ["temp", "%tmp%", "cleanup", "tmpdir"],
    ans: 1,
    exp: "<strong>%tmp%</strong> (ou <strong>%temp%</strong>) saisi dans Win+R ouvre directement le dossier des fichiers temporaires de l'utilisateur courant. Vous pouvez ensuite sÃ©lectionner tout (Ctrl+A) et supprimer (Suppr). Certains fichiers en cours d'utilisation ne pourront pas Ãªtre supprimÃ©s â€” ignorez-les."
  },
  {
    cat: "Fichiers temporaires & Espace disque",
    q: "Quelle fonctionnalitÃ© de Windows 10/11 nettoie automatiquement les fichiers temporaires et libÃ¨re de l'espace en arriÃ¨re-plan ?",
    opts: ["Windows Defender", "Sens du stockage (Storage Sense)", "Optimisation des lecteurs", "Nettoyage de disque avancÃ©"],
    ans: 1,
    exp: "<strong>Le Sens du stockage (Storage Sense)</strong> est une fonctionnalitÃ© de Windows 10/11 qui supprime automatiquement les fichiers temporaires, vide la corbeille et nettoie le dossier TÃ©lÃ©chargements selon un calendrier configurable. Accessible dans ParamÃ¨tres > SystÃ¨me > Stockage."
  },
  {
    cat: "Fichiers temporaires & Espace disque",
    q: "Que contient gÃ©nÃ©ralement le dossier Â« Windows.old Â» prÃ©sent sur C:\\ aprÃ¨s une mise Ã  jour majeure de Windows ?",
    opts: ["Les sauvegardes des drivers", "L'ancienne version de Windows (rÃ©cupÃ©rable pendant 10 jours)", "Les fichiers de restauration systÃ¨me", "Les anciennes mises Ã  jour de sÃ©curitÃ©"],
    ans: 1,
    exp: "<strong>Windows.old</strong> contient l'intÃ©gralitÃ© de l'ancienne version de Windows, permettant un retour arriÃ¨re pendant 10 jours. Il peut peser plusieurs Go (parfois 20 Ã  30 Go). Le Nettoyage de disque > Â« Nettoyer les fichiers systÃ¨me Â» permet de le supprimer dÃ©finitivement une fois que vous Ãªtes satisfait de la nouvelle version."
  },

  // â”€â”€ 2. PROGRAMMES & DÃ‰MARRAGE (5 questions) â”€â”€
  {
    cat: "Programmes & DÃ©marrage",
    q: "Comment accÃ©der Ã  la liste des programmes qui se lancent automatiquement au dÃ©marrage de Windows 10/11 ?",
    opts: ["Panneau de configuration > Programmes", "Gestionnaire des tÃ¢ches > onglet DÃ©marrage", "msconfig > onglet DÃ©marrage", "Les deux rÃ©ponses B et C sont correctes"],
    ans: 3,
    exp: "<strong>Les deux mÃ©thodes fonctionnent :</strong> le <em>Gestionnaire des tÃ¢ches (Ctrl+Maj+Ã‰chap) > onglet DÃ©marrage</em> est la mÃ©thode recommandÃ©e sur Windows 10/11. Sous Windows 10/11, <em>msconfig</em> redirige vers le Gestionnaire des tÃ¢ches pour les programmes de dÃ©marrage. Les deux permettent d'activer/dÃ©sactiver les programmes au dÃ©marrage."
  },
  {
    cat: "Programmes & DÃ©marrage",
    q: "Quel est l'impact de dÃ©sactiver des programmes inutiles au dÃ©marrage ?",
    opts: ["Aucun impact visible", "AccÃ©lÃ¨re le dÃ©marrage de Windows et libÃ¨re de la RAM", "Risque d'endommager Windows", "Ralentit le dÃ©marrage mais accÃ©lÃ¨re les applications"],
    ans: 1,
    exp: "<strong>DÃ©sactiver les programmes inutiles au dÃ©marrage</strong> accÃ©lÃ¨re sensiblement le boot de Windows et libÃ¨re de la mÃ©moire RAM pour vos applications. Des logiciels comme Spotify, Teams, Discord, OneDrive s'y cachent souvent. DÃ©sactiver un programme du dÃ©marrage ne le dÃ©sinstalle pas â€” il reste accessible manuellement."
  },
  {
    cat: "Programmes & DÃ©marrage",
    q: "Quelle commande Windows permet de dÃ©sinstaller proprement un programme via le Panneau de configuration ?",
    opts: ["appwiz.cpl", "programs.cpl", "uninstall.exe", "control add"],
    ans: 0,
    exp: "<strong>appwiz.cpl</strong> saisi dans Win+R ouvre directement la fenÃªtre Â« Programmes et fonctionnalitÃ©s Â» du Panneau de configuration, permettant de dÃ©sinstaller, modifier ou rÃ©parer des programmes installÃ©s sur votre PC."
  },
  {
    cat: "Programmes & DÃ©marrage",
    q: "AprÃ¨s avoir dÃ©sinstallÃ© un programme, que peut-il rester sur le PC ?",
    opts: ["Rien, la dÃ©sinstallation est toujours complÃ¨te", "Des entrÃ©es de registre et des dossiers rÃ©siduels dans AppData", "Uniquement des raccourcis sur le bureau", "Des fichiers uniquement dans C:\\Program Files"],
    ans: 1,
    exp: "<strong>La dÃ©sinstallation laisse souvent des rÃ©sidus</strong> : entrÃ©es dans le registre Windows, dossiers dans <em>C:\\Users\\[Nom]\\AppData</em>, fichiers de configuration, clÃ©s de licence. Des outils comme <em>Revo Uninstaller</em> ou <em>IObit Uninstaller</em> effectuent un nettoyage plus complet qu'un dÃ©sinstalleur standard."
  },
  {
    cat: "Programmes & DÃ©marrage",
    q: "Quel outil tiers gratuit est reconnu pour effectuer une dÃ©sinstallation approfondie avec nettoyage des rÃ©sidus ?",
    opts: ["CCleaner", "Revo Uninstaller Free", "Glary Utilities", "Advanced SystemCare"],
    ans: 1,
    exp: "<strong>Revo Uninstaller Free</strong> est l'outil de rÃ©fÃ©rence pour la dÃ©sinstallation approfondie. AprÃ¨s avoir lancÃ© le dÃ©sinstalleur officiel du programme, il analyse le registre et les dossiers pour trouver et supprimer tous les rÃ©sidus laissÃ©s. Il existe en version portable (sans installation)."
  },

  // â”€â”€ 3. NETTOYAGE DU REGISTRE & SYSTÃˆME (5 questions) â”€â”€
  {
    cat: "Registre & SystÃ¨me",
    q: "Qu'est-ce que le registre Windows ?",
    opts: ["Un journal des erreurs systÃ¨mes", "Une base de donnÃ©es centrale stockant les paramÃ¨tres de Windows et des applications", "Un dossier contenant les fichiers de configuration (.ini)", "Un outil de sauvegarde automatique de Windows"],
    ans: 1,
    exp: "<strong>Le registre Windows</strong> est une base de donnÃ©es hiÃ©rarchique (ruches : HKEY_LOCAL_MACHINE, HKEY_CURRENT_USERâ€¦) qui stocke tous les paramÃ¨tres de configuration de Windows et des applications installÃ©es. Il s'Ã©dite avec <em>regedit</em>, mais toute modification incorrecte peut dÃ©stabiliser le systÃ¨me."
  },
  {
    cat: "Registre & SystÃ¨me",
    q: "Est-il recommandÃ© de nettoyer le registre Windows manuellement ou avec un outil tiers pour amÃ©liorer les performances ?",
    opts: ["Oui, indispensable tous les mois", "Oui, avec un outil fiable comme CCleaner", "Non, le gain est nÃ©gligeable et le risque rÃ©el d'instabilitÃ© existe", "Oui, cela double la vitesse du PC"],
    ans: 2,
    exp: "<strong>Microsoft dÃ©conseille le nettoyage du registre</strong> : le gain de performances est quasi nul sur un PC moderne, et certains nettoyeurs suppriment des clÃ©s encore utilisÃ©es, causant des plantages. Windows gÃ¨re lui-mÃªme les entrÃ©es obsolÃ¨tes. Seuls les rÃ©sidus post-dÃ©sinstallation mÃ©ritent attention, et uniquement manuellement si vous savez ce que vous faites."
  },
  {
    cat: "Registre & SystÃ¨me",
    q: "Quelle commande Windows permet de vÃ©rifier et rÃ©parer les fichiers systÃ¨me corrompus ?",
    opts: ["chkdsk /f", "sfc /scannow", "dism /cleanup", "repair /windows"],
    ans: 1,
    exp: "<strong>sfc /scannow</strong> (System File Checker) vÃ©rifie l'intÃ©gritÃ© de tous les fichiers systÃ¨me protÃ©gÃ©s et remplace les fichiers corrompus. Ã€ lancer dans une invite de commandes en <em>administrateur</em>. Si des erreurs persistent, complÃ©ter avec <em>DISM /Online /Cleanup-Image /RestoreHealth</em>."
  },
  {
    cat: "Registre & SystÃ¨me",
    q: "Quelle commande vÃ©rifie et rÃ©pare les erreurs sur un disque dur sous Windows ?",
    opts: ["sfc /disk", "chkdsk C: /f /r", "repair-disk /auto", "scandisk /fix"],
    ans: 1,
    exp: "<strong>chkdsk C: /f /r</strong> vÃ©rifie le disque C: pour des erreurs logiques (/f = rÃ©pare les erreurs) et des secteurs dÃ©fectueux (/r = localise et rÃ©cupÃ¨re les donnÃ©es). Sur un disque en cours d'utilisation, Windows proposera de lancer la vÃ©rification au prochain redÃ©marrage. Ã€ exÃ©cuter en administrateur."
  },
  {
    cat: "Registre & SystÃ¨me",
    q: "Quel est le rÃ´le de l'outil DISM (Deployment Image Servicing and Management) ?",
    opts: ["DÃ©fragmenter le disque systÃ¨me", "RÃ©parer l'image Windows utilisÃ©e par sfc /scannow", "Nettoyer les fichiers temporaires systÃ¨me", "DÃ©sinstaller les mises Ã  jour problÃ©matiques"],
    ans: 1,
    exp: "<strong>DISM</strong> rÃ©pare l'image Windows elle-mÃªme, que sfc /scannow utilise comme source de rÃ©fÃ©rence. Commande : <em>DISM /Online /Cleanup-Image /RestoreHealth</em>. Ã€ utiliser quand sfc /scannow signale des erreurs qu'il ne peut pas rÃ©parer. DISM tÃ©lÃ©charge les fichiers manquants depuis Windows Update."
  },

  // â”€â”€ 4. SÃ‰CURITÃ‰ & MALWARES (5 questions) â”€â”€
  {
    cat: "SÃ©curitÃ© & Malwares",
    q: "Quel antivirus est intÃ©grÃ© nativement dans Windows 10 et 11 ?",
    opts: ["Microsoft Security Essentials", "Windows Defender (Microsoft Defender Antivirus)", "Malwarebytes", "Norton 360"],
    ans: 1,
    exp: "<strong>Windows Defender (Microsoft Defender Antivirus)</strong> est l'antivirus intÃ©grÃ© Ã  Windows 10/11. Il offre une protection en temps rÃ©el, une analyse Ã  la demande et des mises Ã  jour automatiques. Pour un usage personnel, il est suffisant et rivalise avec les solutions payantes selon les tests indÃ©pendants (AV-TEST, AV-Comparatives)."
  },
  {
    cat: "SÃ©curitÃ© & Malwares",
    q: "Quel outil gratuit est recommandÃ© pour une analyse anti-malware complÃ©mentaire Ã  l'antivirus principal ?",
    opts: ["CCleaner", "Malwarebytes Free (analyse Ã  la demande)", "Revo Uninstaller", "Glary Utilities"],
    ans: 1,
    exp: "<strong>Malwarebytes Free</strong> est le standard de rÃ©fÃ©rence pour une analyse anti-malware secondaire. Il dÃ©tecte des menaces (PUP, adware, spyware, rootkits) que les antivirus traditionnels manquent parfois. La version gratuite permet les analyses manuelles ; la version payante ajoute la protection en temps rÃ©el."
  },
  {
    cat: "SÃ©curitÃ© & Malwares",
    q: "Quel signe peut indiquer qu'un PC est infectÃ© par un malware ?",
    opts: ["Le PC dÃ©marre plus lentement que d'habitude", "Des publicitÃ©s pop-up apparaissent mÃªme sans navigateur ouvert", "La page d'accueil du navigateur a changÃ© sans action de l'utilisateur", "Toutes ces rÃ©ponses sont correctes"],
    ans: 3,
    exp: "<strong>Tous ces signes peuvent indiquer une infection :</strong> ralentissement inexpliquÃ©, publicitÃ©s intempestives (adware), modifications du navigateur (hijacker), processus inconnus dans le Gestionnaire des tÃ¢ches, activitÃ© disque ou rÃ©seau Ã©levÃ©e au repos. En cas de doute, lancer une analyse Malwarebytes + Windows Defender."
  },
  {
    cat: "SÃ©curitÃ© & Malwares",
    q: "Que signifie PUP dans le contexte de la sÃ©curitÃ© informatique ?",
    opts: ["Programme Utilisateur Principal", "Potentially Unwanted Program (Programme potentiellement indÃ©sirable)", "Protected User Profile", "Primary Update Package"],
    ans: 1,
    exp: "<strong>PUP (Potentially Unwanted Program)</strong> dÃ©signe un programme installÃ© Ã  l'insu de l'utilisateur, souvent bundlÃ© avec un autre logiciel gratuit. Exemples : barres d'outils de navigateur, optimiseurs systÃ¨me douteux, adware. Ils ne sont pas toujours dangereux mais consomment des ressources et sont indÃ©sirables."
  },
  {
    cat: "SÃ©curitÃ© & Malwares",
    q: "Quelle bonne pratique rÃ©duit le risque d'infection lors de l'installation d'un logiciel gratuit ?",
    opts: ["Toujours choisir l'installation rapide (Express)", "Choisir l'installation personnalisÃ©e et dÃ©cocher les logiciels supplÃ©mentaires proposÃ©s", "DÃ©sactiver l'antivirus pendant l'installation", "TÃ©lÃ©charger uniquement depuis des sites de tÃ©lÃ©chargement populaires comme Softonic"],
    ans: 1,
    exp: "<strong>Toujours choisir l'installation personnalisÃ©e (Custom)</strong> pour voir et dÃ©cocher les logiciels tiers proposÃ©s en bundle (barres d'outils, antivirus tiers, optimiseurs). L'installation rapide accepte tout par dÃ©faut. TÃ©lÃ©chargez de prÃ©fÃ©rence directement sur le site officiel de l'Ã©diteur pour Ã©viter les packages modifiÃ©s."
  },

  // â”€â”€ 5. PERFORMANCES & MÃ‰MOIRE (5 questions) â”€â”€
  {
    cat: "Performances & MÃ©moire",
    q: "Quel outil Windows affiche en temps rÃ©el la consommation CPU, RAM, disque et rÃ©seau de chaque processus ?",
    opts: ["Moniteur de fiabilitÃ©", "Gestionnaire des tÃ¢ches (Ctrl+Maj+Ã‰chap)", "Observateur d'Ã©vÃ©nements", "Analyseur de performances"],
    ans: 1,
    exp: "<strong>Le Gestionnaire des tÃ¢ches (Ctrl+Maj+Ã‰chap)</strong> affiche en temps rÃ©el la consommation de chaque processus (CPU, RAM, disque, rÃ©seau, GPU). L'onglet Performances donne une vue graphique globale. C'est l'outil de diagnostic rapide de premiÃ¨re intention pour identifier un processus gourmand."
  },
  {
    cat: "Performances & MÃ©moire",
    q: "Que se passe-t-il quand la RAM est saturÃ©e sous Windows ?",
    opts: ["Le PC s'Ã©teint automatiquement", "Windows utilise le fichier d'Ã©change (pagefile) sur le disque, ce qui ralentit le systÃ¨me", "Les applications les moins importantes se ferment automatiquement", "Windows libÃ¨re automatiquement la RAM en supprimant les fichiers temporaires"],
    ans: 1,
    exp: "<strong>Quand la RAM est saturÃ©e</strong>, Windows utilise le <em>fichier d'Ã©change (pagefile.sys)</em> sur le disque dur comme mÃ©moire virtuelle. Comme le disque est bien plus lent que la RAM, les performances chutent drastiquement. Sur un PC avec un HDD, cela se traduit par une activitÃ© disque constante et un systÃ¨me quasi bloquÃ©."
  },
  {
    cat: "Performances & MÃ©moire",
    q: "Quel est l'avantage principal de remplacer un disque dur (HDD) par un SSD pour les performances de Windows ?",
    opts: ["Consommation Ã©lectrique rÃ©duite uniquement", "DÃ©marrage de Windows, lancement d'applications et chargements jusqu'Ã  5-10x plus rapides", "Meilleure qualitÃ© sonore du PC", "CapacitÃ© de stockage doublÃ©e pour le mÃªme prix"],
    ans: 1,
    exp: "<strong>Un SSD est la mise Ã  niveau numÃ©ro 1</strong> pour un PC lent. Les SSD sont 5 Ã  10 fois plus rapides qu'un HDD pour les lectures/Ã©critures alÃ©atoires (ce que fait Windows en permanence). Le dÃ©marrage passe de 1-2 minutes Ã  10-15 secondes, les applications s'ouvrent quasi instantanÃ©ment."
  },
  {
    cat: "Performances & MÃ©moire",
    q: "Quelle option Windows permet de choisir entre Â« PrivilÃ©gier les performances Â» et Â« PrivilÃ©gier l'apparence Â» (effets visuels) ?",
    opts: ["ParamÃ¨tres > Affichage > RÃ©solution", "SystÃ¨me > Ã€ propos > ParamÃ¨tres systÃ¨me avancÃ©s > ParamÃ¨tres de performances", "Panneau de config > Centre de mobilitÃ©", "Gestionnaire de tÃ¢ches > onglet Performance"],
    ans: 1,
    exp: "<strong>SystÃ¨me > ParamÃ¨tres systÃ¨me avancÃ©s > Performances > ParamÃ¨tres</strong> permet de dÃ©sactiver les effets visuels (animations, transparences, ombres). Choisir Â« Ajuster afin d'obtenir les meilleures performances Â» dÃ©sactive tous les effets. Gain sensible surtout sur les PC anciens avec peu de RAM ou GPU intÃ©grÃ© faible."
  },
  {
    cat: "Performances & MÃ©moire",
    q: "Ã€ quelle frÃ©quence est-il recommandÃ© de redÃ©marrer un PC Windows pour maintenir ses performances ?",
    opts: ["Jamais, il vaut mieux toujours le laisser en veille", "Au moins une fois par semaine ou quand Windows le demande", "Uniquement lors des mises Ã  jour", "Tous les jours obligatoirement"],
    ans: 1,
    exp: "<strong>RedÃ©marrer au moins une fois par semaine</strong> (ou quand Windows le demande aprÃ¨s une mise Ã  jour) est une bonne pratique. Le redÃ©marrage vide la RAM, efface les fichiers temporaires en cours, applique les mises Ã  jour en attente et remet Ã  zÃ©ro les services qui peuvent dÃ©river. La mise en veille ne remplace pas le redÃ©marrage."
  },

  // â”€â”€ 6. DISQUE DUR & MAINTENANCE MATÃ‰RIELLE (5 questions) â”€â”€
  {
    cat: "Disque dur & Maintenance",
    q: "La dÃ©fragmentation du disque est-elle utile sur un SSD ?",
    opts: ["Oui, indispensable tous les mois", "Oui, mais seulement une fois par an", "Non, inutile et potentiellement nocif (usure des cellules)", "Non, car les SSD ne fragmentent jamais les donnÃ©es"],
    ans: 2,
    exp: "<strong>Ne jamais dÃ©fragmenter un SSD !</strong> La dÃ©fragmentation effectue un grand nombre d'Ã©critures inutiles qui usent les cellules flash du SSD sans apporter aucun gain (les SSD n'ont pas de tÃªte de lecture physique). Windows le sait et remplace automatiquement la dÃ©fragmentation par l'<em>optimisation TRIM</em> sur les SSD."
  },
  {
    cat: "Disque dur & Maintenance",
    q: "Quel outil Windows vÃ©rifie l'Ã©tat de santÃ© d'un disque dur via la technologie S.M.A.R.T. ?",
    opts: ["chkdsk", "CrystalDiskInfo (tiers) ou wmic dans l'invite de commandes", "Nettoyage de disque", "DÃ©fragmenteur de disque"],
    ans: 1,
    exp: "<strong>S.M.A.R.T. (Self-Monitoring, Analysis and Reporting Technology)</strong> est un systÃ¨me intÃ©grÃ© aux disques qui surveille leur santÃ©. <em>CrystalDiskInfo</em> (gratuit) affiche le statut S.M.A.R.T. de faÃ§on lisible (Bon / Attention / Mauvais). Windows peut aussi interroger le S.M.A.R.T. via : <em>wmic diskdrive get status</em> dans l'invite de commandes."
  },
  {
    cat: "Disque dur & Maintenance",
    q: "Quel pourcentage d'espace libre minimum est recommandÃ© sur le disque systÃ¨me (C:\\) pour un bon fonctionnement de Windows ?",
    opts: ["Au moins 2 Go libres", "Au moins 10-15% de la capacitÃ© totale", "Au moins 50% de la capacitÃ© totale", "L'espace libre n'influence pas les performances"],
    ans: 1,
    exp: "<strong>Maintenir au moins 10-15% d'espace libre</strong> sur le disque systÃ¨me est recommandÃ©. Windows a besoin d'espace pour le fichier d'Ã©change, les fichiers temporaires, les mises Ã  jour et les points de restauration. En dessous de 10%, les performances se dÃ©gradent et les mises Ã  jour peuvent Ã©chouer."
  },
  {
    cat: "Disque dur & Maintenance",
    q: "Qu'est-ce qu'un point de restauration Windows et pourquoi est-il important avant un nettoyage ?",
    opts: ["Une sauvegarde complÃ¨te du disque dur", "Un instantanÃ© de l'Ã©tat du systÃ¨me permettant d'annuler des modifications en cas de problÃ¨me", "Une copie de sauvegarde de vos documents personnels", "Un point de dÃ©marrage d'urgence sur clÃ© USB"],
    ans: 1,
    exp: "<strong>Un point de restauration</strong> sauvegarde l'Ã©tat du registre, des fichiers systÃ¨me et des paramÃ¨tres Ã  un instant T. En cas de problÃ¨me aprÃ¨s un nettoyage ou une modification, Windows peut revenir Ã  cet Ã©tat via Panneau de config > SystÃ¨me > Protection du systÃ¨me > Restauration du systÃ¨me. CrÃ©ez-en un avant tout nettoyage important."
  },
  {
    cat: "Disque dur & Maintenance",
    q: "Quelle action simple permet de nettoyer physiquement un PC fixe pour Ã©viter la surchauffe et les ralentissements ?",
    opts: ["Formater le disque dur rÃ©guliÃ¨rement", "DÃ©poussiÃ©rer l'intÃ©rieur du boÃ®tier (ventilateurs, radiateurs) avec de l'air comprimÃ©", "Remplacer le cÃ¢ble d'alimentation", "DÃ©sinstaller les pilotes graphiques"],
    ans: 1,
    exp: "<strong>Le dÃ©poussiÃ©rage physique</strong> est souvent nÃ©gligÃ© mais crucial : la poussiÃ¨re obstrue les ventilateurs et les radiateurs, provoquant une montÃ©e en tempÃ©rature du processeur et de la carte graphique. En surchauffe, le PC rÃ©duit automatiquement ses performances (throttling) ou s'Ã©teint brusquement. Un nettoyage annuel Ã  l'air comprimÃ© suffit gÃ©nÃ©ralement."
  }
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let state = {
  current:  0,
  answers:  new Array(30).fill(null),
  answered: new Array(30).fill(false),
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function $(id) { return document.getElementById(id); }
const LETTERS = ['A','B','C','D'];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  QUIZ LOGIC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startQuiz() {
  $('intro-screen').style.display = 'none';
  $('main-header').style.display  = 'block';
  $('quiz-screen').style.display  = 'block';
  state = {
    current:  0,
    answers:  new Array(30).fill(null),
    answered: new Array(30).fill(false),
  };
  renderQuestion(0);
  updateHeader();
}

function renderQuestion(idx) {
  const q    = QUESTIONS[idx];
  const ans  = state.answers[idx];
  const done = state.answered[idx];

  $('question-container').innerHTML = `
    <div class="question-card active">
      <div class="q-cat">${q.cat}</div>
      <div class="q-header">
        <div class="q-num">Q${String(idx+1).padStart(2,'0')}</div>
        <div class="q-text">${q.q}</div>
      </div>
      <div class="options" id="opts">
        ${q.opts.map((opt, i) => {
          let cls = '';
          if (done) {
            cls = 'disabled';
            if (i === q.ans)               cls += ' correct';
            else if (ans === i)            cls += ' wrong';
          } else if (ans === i) cls = 'selected';

          const icon = done
            ? (i === q.ans ? 'âœ…' : (ans === i && ans !== q.ans ? 'âŒ' : ''))
            : '';

          return `<div class="option ${cls}" id="opt${i}"
                       onclick="${!done ? `selectOption(${i})` : ''}">
            <div class="option-letter">${LETTERS[i]}</div>
            <div class="option-text">${opt}</div>
            <div class="option-icon" style="opacity:${icon?'1':'0'}">${icon}</div>
          </div>`;
        }).join('')}
      </div>
      <div class="explanation ${done ? 'show' : ''}" id="expl">
        ğŸ’¡ ${q.exp}
      </div>
    </div>

    <div class="nav-row">
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn btn-ghost" onclick="goTo(${idx-1})" ${idx===0?'disabled':''}>â† PrÃ©c.</button>
        <button class="btn btn-ghost" onclick="skipQuestion()" ${done?'disabled':''}>Ignorer â­</button>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn btn-primary" id="btn-validate" onclick="validate()"
          ${(ans===null||done)?'disabled':''}>Valider âœ“</button>
        ${idx < 29
          ? `<button class="btn btn-ghost" onclick="goTo(${idx+1})">Suiv. â†’</button>`
          : `<button class="btn btn-primary" onclick="showResults()">Terminer ğŸ</button>`}
      </div>
    </div>`;

  updateHeader();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function selectOption(i) {
  if (state.answered[state.current]) return;
  state.answers[state.current] = i;
  document.querySelectorAll('.option').forEach((el, j) => {
    el.classList.toggle('selected', j === i);
  });
  const btn = $('btn-validate');
  if (btn) { btn.disabled = false; btn.classList.add('pop'); }
}

function validate() {
  const idx = state.current;
  if (state.answers[idx] === null || state.answered[idx]) return;
  state.answered[idx] = true;

  const q   = QUESTIONS[idx];
  const ans = state.answers[idx];

  document.querySelectorAll('.option').forEach((el, i) => {
    el.classList.add('disabled');
    el.onclick = null;
    if (i === q.ans) {
      el.classList.add('correct');
      el.querySelector('.option-icon').textContent = 'âœ…';
      el.querySelector('.option-icon').style.opacity = '1';
    } else if (i === ans && ans !== q.ans) {
      el.classList.add('wrong');
      el.querySelector('.option-icon').textContent = 'âŒ';
      el.querySelector('.option-icon').style.opacity = '1';
    }
  });

  $('expl').classList.add('show');
  const btn = $('btn-validate');
  if (btn) btn.disabled = true;
  updateHeader();
}

function skipQuestion() {
  if (state.answered[state.current]) return;
  state.answers[state.current]  = -1;
  state.answered[state.current] = true;
  renderQuestion(state.current);
}

function goTo(idx) {
  if (idx < 0 || idx > 29) return;
  state.current = idx;
  renderQuestion(idx);
}

function updateHeader() {
  const done    = state.answered.filter(Boolean).length;
  const correct = state.answers.reduce((a, v, i) =>
    a + (state.answered[i] && v === QUESTIONS[i].ans ? 1 : 0), 0);
  $('live-score').textContent = `${correct} / ${done}`;
  $('prog-fill').style.width  = Math.round(done/30*100) + '%';
  $('prog-txt').textContent   = `${done} / 30`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RÃ‰SULTATS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showResults() {
  $('quiz-screen').style.display    = 'none';
  $('results-screen').style.display = 'block';

  const correct = state.answers.reduce((a,v,i) =>
    a + (state.answered[i] && v === QUESTIONS[i].ans ? 1 : 0), 0);
  const wrong   = state.answers.reduce((a,v,i) =>
    a + (state.answered[i] && v !== null && v !== -1 && v !== QUESTIONS[i].ans ? 1 : 0), 0);
  const skipped = state.answers.filter(v => v === null || v === -1).length;
  const pct     = Math.round(correct / 30 * 100);

  const offset = 326.7 - (pct / 100) * 326.7;
  setTimeout(() => {
    $('ring-arc').style.transition = 'stroke-dashoffset 1s cubic-bezier(0.4,0,0.2,1)';
    $('ring-arc').style.strokeDashoffset = offset;
  }, 100);

  $('res-pct').textContent  = pct + '%';
  $('res-ok').textContent   = correct;
  $('res-err').textContent  = wrong;
  $('res-skip').textContent = skipped;

  let title, msg;
  if      (pct >= 90) { title = 'ğŸ† Expert !';        msg = `Vous maÃ®trisez parfaitement l'entretien d'un PC Windows. Score exceptionnel : ${correct}/30 !`; }
  else if (pct >= 70) { title = 'ğŸ‰ TrÃ¨s bien !';     msg = 'Vous avez de solides connaissances en maintenance Windows. Quelques points Ã  consolider.'; }
  else if (pct >= 50) { title = 'ğŸ‘ Pas mal !';       msg = 'Vous avez les bases. Pratiquez ces nettoyages rÃ©guliÃ¨rement pour ancrer vos connaissances.'; }
  else if (pct >= 30) { title = 'ğŸ“š Ã€ retravailler'; msg = 'L\'entretien d\'un PC est un sujet vaste. Relisez les explications et retentez le QCM !'; }
  else                { title = 'ğŸ’ª DÃ©butant';        msg = 'C\'est un bon dÃ©but ! Explorez ces outils Windows et les notions de maintenance de base.'; }

  $('res-title').textContent = title;
  $('res-msg').textContent   = msg;
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function showReview() {
  const area = $('review-area');
  area.style.display = area.style.display === 'none' ? 'block' : 'none';
  if (area.style.display === 'block') { renderReview('all'); area.scrollIntoView({behavior:'smooth',block:'start'}); }
}

function filterReview(filter, btn) {
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderReview(filter);
}

function renderReview(filter) {
  let html = '';
  QUESTIONS.forEach((q, i) => {
    const a     = state.answers[i];
    const done  = state.answered[i];
    const isOk    = done && a === q.ans;
    const isWrong = done && a !== null && a !== -1 && a !== q.ans;
    const isSkip  = !done || a === null || a === -1;

    if (filter === 'ok'    && !isOk)    return;
    if (filter === 'wrong' && !isWrong) return;
    if (filter === 'skip'  && !isSkip)  return;

    const icon = isOk ? 'âœ…' : isWrong ? 'âŒ' : 'â­';
    const yourAns = a !== null && a !== -1 ? q.opts[a] : 'â€”';

    html += `<div class="review-item" onclick="jumpToQ(${i})">
      <div class="review-icon">${icon}</div>
      <div class="review-body">
        <div class="review-q">Q${i+1}. ${q.q}</div>
        <div class="review-ans">
          ${isWrong ? `<span class="wrong-ans">Votre rÃ©ponse : ${yourAns}</span> &nbsp;Â·&nbsp; ` : ''}
          <span class="correct-ans">âœ“ ${q.opts[q.ans]}</span>
        </div>
      </div>
    </div>`;
  });

  $('review-list').innerHTML = html ||
    '<div style="text-align:center;color:var(--text2);padding:24px;font-size:.85rem">Aucune question dans cette catÃ©gorie.</div>';
}

function jumpToQ(idx) {
  $('results-screen').style.display = 'none';
  $('quiz-screen').style.display    = 'block';
  state.current = idx;
  renderQuestion(idx);
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function restartQuiz() {
  $('results-screen').style.display = 'none';
  $('ring-arc').style.transition    = 'none';
  $('ring-arc').style.strokeDashoffset = '326.7';
  $('review-area').style.display    = 'none';
  startQuiz();
}
</script>
</body>
</html>
